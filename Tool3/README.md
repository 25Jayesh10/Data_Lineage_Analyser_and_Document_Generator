# Tool3 - Documentation Generator and LLM Service

## Overview
Tool3 is designed to automate the generation of documentation and provide language model (LLM) services for the Sybase to PostgreSQL legacy modernization project. It processes input data, interacts with LLMs, and produces structured documentation and reports to assist in code and data migration.

## Functionality
- **Documentation Generation**: Parses input data (such as ASTs or SQL files) and generates human-readable documentation, including procedure descriptions, transformation reports, and schema details.
- **LLM Service**: Integrates with language models to enhance documentation, provide code explanations, and support advanced analysis tasks.
- **Logging**: Uses custom logging styles for clear and informative output during processing.

## Expected Input
- **AST JSON files**: Abstract Syntax Trees representing Sybase or PostgreSQL procedures.
- **SQL files**: Source SQL scripts for analysis and documentation.
- **LLM API Keys**: To use LLM features, the API keys for the respective language model providers (e.g., Gemini, Azure, Anthropic, OpenRouter) must be specified in a `.env` file in the project root.

## Expected Output
- **Markdown Documentation**: Procedure documentation, transformation reports, and schema details in Markdown format.
- **Logs**: Informative logs about the documentation generation and LLM processing steps.
- **Enhanced Reports**: LLM-augmented explanations and summaries for code and data structures.

## Elements Stored in the Generated Documentation
The generated documentation (typically a Markdown file) contains the following elements for each run:

- **Summary**: An overview including total procedures, total tables, and the most called procedure.
- **Table of Contents**: Quick links to each stored procedure's documentation section.
- **Stored Procedure Sections**:
	- **Procedure Name and Anchor**: Title and anchor for direct linking.
	- **Parameters Table**: List of parameters with their names and types.
	- **Tables**: List of tables used by the procedure.
	- **Called Procedures**: List of other procedures called by this procedure.
	- **Call Graph (Mermaid Diagram)**: Visual representation of procedure and table calls.
	- **Business Logic**: Natural language description of the procedure's logic, generated by the LLM.

These elements are designed to make the documentation comprehensive, navigable, and useful for both technical and non-technical stakeholders.

## Usage
Run Tool3 using the provided script:

```
python run_tool3.py
```

Configure input and output paths as needed in the script or via configuration files.

---
For more details, see the code in `doc_generator.py` and `llm_service.py`.
