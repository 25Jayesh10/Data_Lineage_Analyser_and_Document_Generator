graph TD

    %% --- Styles --- %%
    classDef table fill:#f96,stroke:#333,stroke-width:2px,color:#000;
    classDef function fill:#9f6,stroke:#333,stroke-width:2px,color:#000,font-weight:bold;
    classDef trigger fill:#fa0,stroke:#333,stroke-width:2px,color:#000,font-weight:bold;
    classDef procedure fill:#9cf,stroke:#333,stroke-width:2px,color:#000,font-weight:bold;
    classDef column fill:#fff,stroke:#333,stroke-width:1px,color:#000,font-size:12px;


    %% --- Visual Hierarchy --- %%
    subgraph Procedures
        AcmeERP_usp_CalculateFifoCost
        AcmeERP_usp_ConvertToBase
        AcmeERP_usp_ProcessFullPayrollCycle
    end


    %% --- Node Definitions --- %%

    subgraph sg_AcmeERP_PayrollLogs["AcmeERP.PayrollLogs"]
        AcmeERP_PayrollLogs_EmployeeID["EmployeeID"];
        class AcmeERP_PayrollLogs_EmployeeID column;
        AcmeERP_PayrollLogs_GrossSalary["GrossSalary"];
        class AcmeERP_PayrollLogs_GrossSalary column;
        AcmeERP_PayrollLogs_PayPeriodEnd["PayPeriodEnd"];
        class AcmeERP_PayrollLogs_PayPeriodEnd column;
        AcmeERP_PayrollLogs_PayPeriodStart["PayPeriodStart"];
        class AcmeERP_PayrollLogs_PayPeriodStart column;
        AcmeERP_PayrollLogs_TaxDeducted["TaxDeducted"];
        class AcmeERP_PayrollLogs_TaxDeducted column;
    end
    class sg_AcmeERP_PayrollLogs table;

    subgraph sg_dbo_PayrollCalc["dbo.#PayrollCalc"]
        dbo_PayrollCalc_BaseSalary["BaseSalary"];
        class dbo_PayrollCalc_BaseSalary column;
        dbo_PayrollCalc_Bonus["Bonus"];
        class dbo_PayrollCalc_Bonus column;
        dbo_PayrollCalc_ConvertedSalary["ConvertedSalary"];
        class dbo_PayrollCalc_ConvertedSalary column;
        dbo_PayrollCalc_Currency["Currency"];
        class dbo_PayrollCalc_Currency column;
        dbo_PayrollCalc_EmployeeID["EmployeeID"];
        class dbo_PayrollCalc_EmployeeID column;
        dbo_PayrollCalc_GrossSalary["GrossSalary"];
        class dbo_PayrollCalc_GrossSalary column;
        dbo_PayrollCalc_NetSalary["NetSalary"];
        class dbo_PayrollCalc_NetSalary column;
        dbo_PayrollCalc_Tax["Tax"];
        class dbo_PayrollCalc_Tax column;
    end
    class sg_dbo_PayrollCalc table;
    AcmeERP_usp_CalculateFifoCost("AcmeERP.usp_CalculateFifoCost");
    class AcmeERP_usp_CalculateFifoCost procedure;
    AcmeERP_usp_ConvertToBase("AcmeERP.usp_ConvertToBase");
    class AcmeERP_usp_ConvertToBase procedure;
    AcmeERP_usp_ProcessFullPayrollCycle("AcmeERP.usp_ProcessFullPayrollCycle");
    class AcmeERP_usp_ProcessFullPayrollCycle procedure;

    %% --- Relationships --- %%
    AcmeERP_usp_ProcessFullPayrollCycle -- "read" --> dbo_PayrollCalc_EmployeeID;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> AcmeERP_PayrollLogs_EmployeeID;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> AcmeERP_PayrollLogs_GrossSalary;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> AcmeERP_PayrollLogs_PayPeriodEnd;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> AcmeERP_PayrollLogs_PayPeriodStart;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> AcmeERP_PayrollLogs_TaxDeducted;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_BaseSalary;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_Bonus;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_ConvertedSalary;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_Currency;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_EmployeeID;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_GrossSalary;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_NetSalary;
    AcmeERP_usp_ProcessFullPayrollCycle -- "write" --> dbo_PayrollCalc_Tax;
    AcmeERP_usp_ProcessFullPayrollCycle -->|calls| dbo_OBJECT_ID;